@model BugTrackerV2.Models.TicketIndexViewModel

@{
    ViewBag.Title = "Index";
}

<link rel="stylesheet" href="//cdn.datatables.net/1.10.13/css/jquery.dataTables.min.css" />
<h2>Index</h2>

@*<p>
    @Html.ActionLink("Create New", "Create")
</p>*@

@{
    if (User.IsInRole("Admin"))
    {
        <table class="table">
            <thead>
                <tr>
                    <th>
                        @Html.DisplayNameFor(model => model.AdminTickets.FirstOrDefault().AssignedToUser.FirstName)

                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.AdminTickets.FirstOrDefault().OwnerUser.FirstName)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.AdminTickets.FirstOrDefault().Project.Name)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.AdminTickets.FirstOrDefault().TicketPriority.Name)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.AdminTickets.FirstOrDefault().TicketStatus.Name)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.AdminTickets.FirstOrDefault().TicketType.Name)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.AdminTickets.FirstOrDefault().Title)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.AdminTickets.FirstOrDefault().Description)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.AdminTickets.FirstOrDefault().Created)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.AdminTickets.FirstOrDefault().Updated)
                    </th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.AdminTickets)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.AssignedToUser.FirstName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.OwnerUser.FirstName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Project.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.TicketPriority.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.TicketStatus.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.TicketType.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Title)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Description)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Created)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Updated)
                        </td>
                        <td>
                            @Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
                            @Html.ActionLink("Details", "Details", new { id = item.Id }) |
                            @Html.ActionLink("Delete", "Delete", new { id = item.Id })
                        </td>
                    </tr>
                }
            </tbody>



        </table>
    }
}

@{
    if (User.IsInRole("ProjectManager"))
    {
        <table class="table">
            <thead>
                <tr>
                    <th>
                        @Html.DisplayNameFor(model => model.PMTickets.FirstOrDefault().AssignedToUser.FirstName)
                        @*@Html.DisplayNameFor(model => model.AssignedToUser.FirstName)*@
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.PMTickets.FirstOrDefault().OwnerUser.FirstName)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.PMTickets.FirstOrDefault().Project.Name)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.PMTickets.FirstOrDefault().TicketPriority.Name)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.PMTickets.FirstOrDefault().TicketStatus.Name)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.PMTickets.FirstOrDefault().TicketType.Name)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.PMTickets.FirstOrDefault().Title)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.PMTickets.FirstOrDefault().Description)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.PMTickets.FirstOrDefault().Created)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.PMTickets.FirstOrDefault().Updated)
                    </th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.PMTickets)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.AssignedToUser.FirstName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.OwnerUser.FirstName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Project.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.TicketPriority.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.TicketStatus.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.TicketType.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Title)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Description)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Created)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Updated)
                        </td>
                        <td>
                            @Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
                            @Html.ActionLink("Details", "Details", new { id = item.Id }) |
                            @Html.ActionLink("Delete", "Delete", new { id = item.Id })
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    }
}









@{
    if (User.IsInRole("Developer"))
    {

        <table class="table">
            <thead>
                <tr>
                    <th>
                        @Html.DisplayNameFor(model => model.DevTickets.FirstOrDefault().AssignedToUser.FirstName)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.DevTickets.FirstOrDefault().OwnerUser.FirstName)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.DevTickets.FirstOrDefault().Project.Name)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.DevTickets.FirstOrDefault().TicketPriority.Name)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.DevTickets.FirstOrDefault().TicketStatus.Name)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.DevTickets.FirstOrDefault().TicketType.Name)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.DevTickets.FirstOrDefault().Title)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.DevTickets.FirstOrDefault().Description)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.DevTickets.FirstOrDefault().Created)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.DevTickets.FirstOrDefault().Updated)
                    </th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.DevTickets)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.AssignedToUser.FirstName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.OwnerUser.FirstName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Project.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.TicketPriority.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.TicketStatus.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.TicketType.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Title)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Description)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Created)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Updated)
                        </td>
                        <td>
                            @Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
                            @Html.ActionLink("Details", "Details", new { id = item.Id }) |
                            @Html.ActionLink("Delete", "Delete", new { id = item.Id })
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    }
}





@{
    if (User.IsInRole("Submitter"))
    {

        <table class="table">
            <thead>
                <tr>
                    <th>
                        @Html.DisplayNameFor(model => model.SubTickets.FirstOrDefault().AssignedToUser.FirstName)
                        @*@Html.DisplayNameFor(model => model.AssignedToUser.FirstName)*@
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.SubTickets.FirstOrDefault().OwnerUser.FirstName)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.SubTickets.FirstOrDefault().Project.Name)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.SubTickets.FirstOrDefault().TicketPriority.Name)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.SubTickets.FirstOrDefault().TicketStatus.Name)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.SubTickets.FirstOrDefault().TicketType.Name)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.SubTickets.FirstOrDefault().Title)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.SubTickets.FirstOrDefault().Description)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.SubTickets.FirstOrDefault().Created)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.SubTickets.FirstOrDefault().Updated)
                    </th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.SubTickets)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.AssignedToUser.FirstName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.OwnerUser.FirstName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Project.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.TicketPriority.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.TicketStatus.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.TicketType.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Title)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Description)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Created)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Updated)
                        </td>
                        <td>
                            @Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
                            @Html.ActionLink("Details", "Details", new { id = item.Id }) |
                            @Html.ActionLink("Delete", "Delete", new { id = item.Id })
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    }
}


@section scripts{
    <script src="//cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js">

    </script>

    <script>
        $(document).ready(function () {
            $('.table').DataTable();
        });
    </script>

}
